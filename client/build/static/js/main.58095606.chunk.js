(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(58),i=a.n(l),s=(a(68),a(7)),o=a(8),d=a(10),c=a(9),u=a(11),h=a(22),m=a(15),v=a(18),p=a(2),b=a.n(p),w=a(6),g=a(12),f=a.n(g),E=a(31),y=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(c.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e="";return this.props.authenticated&&(e=r.a.createElement("button",{id:"logout-button",onClick:this.props.handleLogout},"Logout")),r.a.createElement("div",{className:"navbar"},r.a.createElement("button",{id:"nav-title"},"D2S"),e)}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(c.a)(t).call(this,e))).notValidStyle={borderColor:"Tomato"},a.validStyle={borderColor:"DodgerBlue"},a.state={email:{value:"",valid:!1,style:a.validStyle},password:{value:"",valid:!1,style:a.validStyle},authenticated:!1,errors:"",showErrors:!1,loading:!1},a.handleRegister=a.handleRegister.bind(Object(w.a)(a)),a.handleLogin=a.handleLogin.bind(Object(w.a)(a)),a.handleChange=a.handleChange.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(f.a.get("/api/auth/loginWithSession",{withCredentials:!0}));case 2:"authenticated"===e.sent.data.success&&this.setState({authenticated:!0});case 4:case"end":return e.stop()}}),null,this)}},{key:"handleChange",value:function(e){var t,a=e.target,n=a.name,r=a.value,l=this.getValidation(n,r),i=this.validStyle;""!==r&&!1===l&&(i=this.notValidStyle),this.setState((t={},Object(v.a)(t,n,{value:r,valid:l,style:i}),Object(v.a)(t,"errors",""),Object(v.a)(t,"showErrors",!1),t))}},{key:"handleRegister",value:function(e){var t,a,n,r;return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),this.setState({loading:!0,showErrors:!1}),t=this.state,a=t.email,n=t.password,!1!==a.valid&&!1!==n.valid){l.next=5;break}return l.abrupt("return",this.setState({showErrors:!0,loading:!1}));case 5:return l.prev=5,l.next=8,b.a.awrap(f.a.post("/api/auth/register",{email:a.value,password:n.value},{withCredentials:!0}));case 8:if(!(r=l.sent).data.success){l.next=11;break}return l.abrupt("return",this.setState({authenticated:!0,loading:!1}));case 11:if(!r.data.error){l.next=13;break}return l.abrupt("return",this.setState({showErrors:!0,errors:"Email Registered already",loading:!1}));case 13:l.next=18;break;case 15:return l.prev=15,l.t0=l.catch(5),l.abrupt("return",this.setState({showErrors:!0,errors:"server error",loading:!1}));case 18:case"end":return l.stop()}}),null,this,[[5,15]])}},{key:"handleLogin",value:function(e){var t,a,n,r;return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.preventDefault(),this.setState({loading:!0,showErrors:!1}),t=this.state,a=t.email,n=t.password,!1!==a.valid&&!1!==n.valid){l.next=5;break}return l.abrupt("return",this.setState({showErrors:!0,loading:!1}));case 5:return l.prev=5,l.next=8,b.a.awrap(f.a.post("/api/auth/login",{email:a.value,password:n.value},{withCredentials:!0}));case 8:if(!(r=l.sent).data.success){l.next=11;break}return l.abrupt("return",this.setState({authenticated:!0,loading:!1}));case 11:if(!r.data.error){l.next=13;break}return l.abrupt("return",this.setState({showErrors:!0,errors:r.data.error,loading:!1}));case 13:l.next=18;break;case 15:return l.prev=15,l.t0=l.catch(5),l.abrupt("return",this.setState({showErrors:!0,errors:"server error",loading:!1}));case 18:case"end":return l.stop()}}),null,this,[[5,15]])}},{key:"getValidation",value:function(e,t){switch(e){case"email":return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t);case"password":return t.length>=8}}},{key:"render",value:function(){return this.state.authenticated?r.a.createElement(m.a,{to:"/dashboard"}):r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{id:"auth-page"},r.a.createElement(y,{authenticated:!1}),r.a.createElement(x,{title:"Login",loading:this.state.loading,errors:this.state.errors,showErrors:this.state.showErrors,emailValid:this.state.email.valid,passwordValid:this.state.password.valid}),r.a.createElement(k,{emailStyle:this.state.email.style,passwordStyle:this.state.password.style,handleChange:this.handleChange,handleLogin:this.handleLogin,handleRegister:this.handleRegister}),r.a.createElement(C,null)))}}]),t}(n.Component),x=function(e){var t=e.loading?"block":"none";return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"5px"}},r.a.createElement("h1",null,e.title),r.a.createElement("div",{style:{display:t},className:"loader"}),r.a.createElement(j,{errors:e.errors,showErrors:e.showErrors,emailValid:e.emailValid,passwordValid:e.passwordValid}))},j=function(e){var t=e.showErrors?"block":"none",a=[e.errors,e.emailValid?"":r.a.createElement("div",null,"Email must be valid"),e.passwordValid?"":r.a.createElement("div",null,"Password length must be more than 8")];return r.a.createElement("div",{style:{display:t,color:"Tomato"}},a)},k=function(e){return r.a.createElement("form",{id:"login-box"},r.a.createElement("div",{className:"input"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email"},"Email: ")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"email",style:e.emailStyle,onChange:e.handleChange,required:!0}))),r.a.createElement("div",{className:"input"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password: ")),r.a.createElement("div",null,r.a.createElement("input",{type:"password",name:"password",style:e.passwordStyle,onChange:e.handleChange,required:!0}))),r.a.createElement("div",{id:"log-reg-buttons"},r.a.createElement("button",{type:"submit",onClick:e.handleLogin},"Login"),r.a.createElement("button",{type:"submit",onClick:e.handleRegister},"Register")))},C=function(e){return r.a.createElement("div",{id:"social-log-buttons"},r.a.createElement("a",{href:"/api/auth/google"},r.a.createElement(E.GoogleLoginButton,null)),r.a.createElement("a",{href:"#"},r.a.createElement(E.FacebookLoginButton,null)))},O=S,N=a(61),D=a(62),L=a.n(D),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(c.a)(t).call(this,e))).state={url:null,authenticated:!1,loading:!0,downloadStatus:"idle",file:{name:null,size:null,recieved:null,percent:null}},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a.handleLogout=a.handleLogout.bind(Object(w.a)(a)),a.handleDownload=a.handleDownload.bind(Object(w.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.awrap(f.a.get("/api/dashboard",{withCredentials:!0}));case 3:this.setState({loading:!1,authenticated:!0}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.setState({authenticated:!1,loading:!1});case 9:case"end":return e.stop()}}),null,this,[[0,6]])}},{key:"handleChange",value:function(e){this.setState({url:e.target.value})}},{key:"handleSubmit",value:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({downloadStatus:"loading"}),t.prev=1,t.next=4,b.a.awrap(f.a.post("/api/download/getFileDetails",{url:this.state.url},{withCredentials:!0}));case 4:e=t.sent,this.setState({file:{name:e.data.name,size:e.data.size}}),this.setState({downloadStatus:"loaded"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.setState({downloadStatus:"error"});case 12:case"end":return t.stop()}}),null,this,[[1,9]])}},{key:"handleDownload",value:function(){var e,t=this;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.setState({downloadStatus:"getting ready"}),e=L()(),a.prev=2,e.emit("join"),e.on("downloading",(function(e){t.setState((function(t){var a=t.file.size?Math.floor(e/t.file.size*100):null;return{downloadStatus:"downloading",file:Object(N.a)({},t.file,{recieved:e,percent:a})}}))})),e.on("uploading",(function(){t.setState({downloadStatus:"uploading"})})),a.next=8,b.a.awrap(f.a.post("/api/download/",{url:this.state.url},{withCredentials:!0}));case 8:e.disconnect(),this.setState({downloadStatus:"finished"}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(2),e.disconnect(),this.setState({downloadStatus:"error"});case 16:case"end":return a.stop()}}),null,this,[[2,12]])}},{key:"handleLogout",value:function(e){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(f.a.get("/api/auth/logout",{withCredentials:!0}));case 2:this.setState({authenticated:!1});case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{style:{width:"100vw",height:"90vh",display:"flex",alignItems:"center",justifyContent:"center"}},I()):!1===this.state.authenticated?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{id:"dash-page"},r.a.createElement(y,{authenticated:!0,handleLogout:this.handleLogout}),r.a.createElement(V,{handleChange:this.handleChange,handleSubmit:this.handleSubmit}),r.a.createElement(R,{downloadStatus:this.state.downloadStatus,file:this.state.file,handleDownload:this.handleDownload}))}}]),t}(n.Component),V=function(e){return r.a.createElement("div",{id:"url-box",className:"dash-child"},r.a.createElement("div",{className:"url-box-item"},r.a.createElement("input",{type:"text",onChange:e.handleChange})),r.a.createElement("div",{className:"url-box-item",style:{display:"flex",justifyContent:"center "}},r.a.createElement("button",{id:"submit-url",className:"dash-button",onClick:e.handleSubmit},"Download")))},R=function(e){if("idle"===e.downloadStatus)return r.a.createElement("div",null);if("loading"===e.downloadStatus)return I();if("error"===e.downloadStatus)return r.a.createElement("div",{style:{color:"red"}},"Error");var t=r.a.createElement(F,{handleDownload:e.handleDownload});return"getting ready"===e.downloadStatus?t=I():"loaded"!==e.downloadStatus&&(t=r.a.createElement(M,{file:e.file})),r.a.createElement("div",{id:"download-status",className:"dash-child"},r.a.createElement(z,{file:e.file,downloadStatus:e.downloadStatus}),r.a.createElement("div",{id:"bar"},t))},z=function(e){var t=e.downloadStatus,a={color:"green"};return"uploading"===t&&(a.color="blue"),"error"===t&&(a.color="red"),r.a.createElement("div",{id:"download-details"},r.a.createElement("div",{id:"left-box",className:"box"},r.a.createElement("div",{className:"box-item"},"Status : "),r.a.createElement("div",{className:"box-item"},"Filename : "),r.a.createElement("div",{className:"box-item"},"Size : "),r.a.createElement("div",{className:"box-item"},"Downloaded : ")),r.a.createElement("div",{id:"right-box",className:"box"},r.a.createElement("div",{className:"box-item",style:a},t),r.a.createElement("div",{className:"box-item"},e.file.name),r.a.createElement("div",{className:"box-item"},G(e.file.size)),r.a.createElement("div",{className:"box-item"},G(e.file.recieved||0))))},F=function(e){return r.a.createElement("button",{id:"start-download",className:"dash-button",onClick:function(){e.handleDownload()}},"Start")},M=function(e){return r.a.createElement("div",{id:"progress"},r.a.createElement("span",{id:"percent"},e.file.percent+" %"),r.a.createElement("div",{id:"progress-bar",style:{width:e.file.percent+"%"}}))},I=function(){return r.a.createElement("div",null," ",r.a.createElement("div",{className:"loader"})," ")};function G(e){if(Math.abs(e)<1e3)return e+" B";var t=["kB","MB","GB","TB","PB","EB","ZB","YB"],a=-1;do{e/=1e3,++a}while(Math.abs(e)>=1e3&&a<t.length-1);return e.toFixed(1)+" "+t[a]}var P=B,T=a(34),W=a.n(T),q={fill:"white",width:"75px"},J=(n.Component,function(e){return r.a.createElement("div",{id:"desc",className:"portfolio-box"},"Hi, I am Gaurav")}),$=function(e){var t=["javascript","sass","react","nodejs"];return t=t.map((function(e){return r.a.createElement("div",{id:"icons"},r.a.createElement(W.a,{icon:e,style:q}),r.a.createElement("div",null,e))})),r.a.createElement("div",{id:"tech",className:"portfolio-box"},t)},A=function(e){var t=["codepen","github"];return t=t.map((function(e){return r.a.createElement("div",{id:"icons"},r.a.createElement(W.a,{icon:e,style:q}),r.a.createElement("div",null,e))})),r.a.createElement("div",{id:"projects",className:"portfolio-box"},t)},H=(a(121),function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/dashboard",component:P}),r.a.createElement(m.b,{path:"/",component:O}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e,t,a){e.exports=a(122)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.58095606.chunk.js.map